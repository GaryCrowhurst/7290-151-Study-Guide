<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit 7290-727/777 Revision Tool | Basic Routine Vehicle Maintenance</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
            color: white;
            padding: 20px 15px;
            text-align: center;
        }

        .header h1 {
            font-size: 1.3rem;
            margin-bottom: 8px;
            line-height: 1.3;
        }

        .header p {
            opacity: 0.9;
            font-size: 0.9rem;
        }

        .progress-section {
            background: #f8f9fa;
            padding: 15px;
            border-bottom: 2px solid #e9ecef;
        }

        .progress-bar-container {
            width: 100%;
            height: 28px;
            background: #e9ecef;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #06b6d4 0%, #0891b2 100%);
            width: 0%;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.85rem;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .stat {
            text-align: center;
            padding: 8px;
        }

        .stat-value {
            font-size: 1.4rem;
            font-weight: bold;
            color: #2a5298;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #6c757d;
            margin-top: 2px;
        }

        .content {
            padding: 15px;
        }

        .start-screen, .quiz-screen, .results-screen {
            display: none;
        }

        .start-screen.active, .quiz-screen.active, .results-screen.active {
            display: block;
        }

        .intro-text {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #2a5298;
        }

        .intro-text h2 {
            color: #2a5298;
            margin-bottom: 12px;
            font-size: 1.2rem;
        }

        .intro-text h3 {
            font-size: 1rem;
            margin-top: 15px;
            margin-bottom: 8px;
        }

        .intro-text p {
            font-size: 0.95rem;
            margin-bottom: 8px;
        }

        .intro-text ul {
            margin-left: 20px;
            margin-top: 8px;
        }

        .intro-text li {
            margin-bottom: 6px;
            font-size: 0.9rem;
        }

        .btn {
            background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
            color: white;
            border: none;
            padding: 14px 30px;
            font-size: 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            display: inline-block;
            text-align: center;
            font-weight: 600;
            width: 100%;
            min-height: 48px;
            touch-action: manipulation;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #868f96 0%, #596164 100%);
        }

        .question-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .question-number {
            color: #06b6d4;
            font-weight: bold;
            font-size: 0.85rem;
            margin-bottom: 10px;
        }

        .question-text {
            font-size: 1.05rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 14px 15px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            min-height: 48px;
            touch-action: manipulation;
        }

        .option:active {
            transform: scale(0.98);
        }

        .option input[type="radio"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            flex-shrink: 0;
        }

        .option label {
            font-size: 0.95rem;
            line-height: 1.4;
        }

        .option.selected {
            background: #e7f3ff;
            border-color: #06b6d4;
            font-weight: 600;
        }

        .option.correct {
            background: #d4edda;
            border-color: #28a745;
        }

        .option.incorrect {
            background: #f8d7da;
            border-color: #dc3545;
        }

        .option.disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            display: none;
            font-size: 0.95rem;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #d4edda;
            border: 1px solid #28a745;
            color: #155724;
        }

        .feedback.incorrect {
            background: #f8d7da;
            border: 1px solid #dc3545;
            color: #721c24;
        }

        .feedback-title {
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .navigation {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }

        .results-summary {
            text-align: center;
            margin-bottom: 30px;
        }

        .results-summary h2 {
            color: #2a5298;
            font-size: 1.5rem;
            margin-bottom: 20px;
        }

        .score-circle {
            width: 160px;
            height: 160px;
            border-radius: 50%;
            background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            color: white;
            box-shadow: 0 10px 30px rgba(6, 182, 212, 0.3);
        }

        .score-percentage {
            font-size: 2.5rem;
            font-weight: bold;
        }

        .score-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .grade-message {
            font-size: 1.1rem;
            margin-bottom: 20px;
            padding: 12px;
            border-radius: 8px;
            font-weight: 600;
        }

        .grade-pass {
            background: #d4edda;
            color: #155724;
        }

        .grade-merit {
            background: #cfe2ff;
            color: #084298;
        }

        .grade-distinction {
            background: #fff3cd;
            color: #856404;
        }

        .grade-fail {
            background: #f8d7da;
            color: #721c24;
        }

        .review-section {
            margin-top: 30px;
        }

        .review-section h3 {
            color: #2a5298;
            margin-bottom: 20px;
            font-size: 1.2rem;
        }

        .review-item {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 12px;
            border-left: 4px solid #e9ecef;
        }

        .review-item.correct {
            border-left-color: #28a745;
        }

        .review-item.incorrect {
            border-left-color: #dc3545;
        }

        .review-question {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
            font-size: 0.95rem;
        }

        .review-answer {
            display: flex;
            flex-direction: column;
            gap: 5px;
            font-size: 0.9rem;
        }

        .your-answer {
            color: #dc3545;
        }

        .correct-answer {
            color: #28a745;
        }

        @media (min-width: 600px) {
            body {
                padding: 15px;
            }

            .header {
                padding: 25px 20px;
            }

            .header h1 {
                font-size: 1.6rem;
            }

            .content {
                padding: 20px;
            }

            .intro-text {
                padding: 20px;
            }

            .question-card {
                padding: 20px;
            }

            .question-text {
                font-size: 1.15rem;
            }

            .stats {
                grid-template-columns: repeat(4, 1fr);
            }

            .score-circle {
                width: 180px;
                height: 180px;
            }

            .score-percentage {
                font-size: 2.8rem;
            }

            .navigation {
                flex-direction: row;
                justify-content: space-between;
            }

            .btn {
                width: auto;
                padding: 14px 35px;
            }
        }

        @media (min-width: 900px) {
            body {
                padding: 20px;
            }

            .header {
                padding: 30px;
            }

            .header h1 {
                font-size: 1.8rem;
            }

            .header p {
                font-size: 1rem;
            }

            .content {
                padding: 30px;
            }

            .progress-section {
                padding: 20px 30px;
            }

            .intro-text {
                padding: 20px;
                margin-bottom: 30px;
            }

            .intro-text h2 {
                font-size: 1.5rem;
            }

            .question-card {
                padding: 25px;
                margin-bottom: 20px;
            }

            .question-text {
                font-size: 1.2rem;
            }

            .option {
                padding: 15px 20px;
            }

            .option:hover {
                background: #e7f3ff;
                border-color: #06b6d4;
                transform: translateX(5px);
            }

            .btn {
                padding: 15px 40px;
                font-size: 1.1rem;
            }

            .btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 5px 20px rgba(6, 182, 212, 0.4);
            }

            .btn:active {
                transform: translateY(0);
            }

            .score-circle {
                width: 200px;
                height: 200px;
            }

            .score-percentage {
                font-size: 3rem;
            }

            .score-label {
                font-size: 1rem;
            }

            .results-summary h2 {
                font-size: 2rem;
            }

            .grade-message {
                font-size: 1.3rem;
                padding: 15px;
            }

            .navigation {
                margin-top: 30px;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Unit 7290-727/777 Revision Tool</h1>
            <p>Carry out Basic Routine Vehicle Maintenance - Level 1</p>
        </div>

        <div class="progress-section">
            <div class="progress-bar-container">
                <div class="progress-bar" id="progressBar">0%</div>
            </div>
            <div class="stats">
                <div class="stat">
                    <div class="stat-value" id="currentQuestion">0</div>
                    <div class="stat-label">Current Question</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="totalQuestions">40</div>
                    <div class="stat-label">Total Questions</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="correctAnswers">0</div>
                    <div class="stat-label">Correct</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="incorrectAnswers">0</div>
                    <div class="stat-label">Incorrect</div>
                </div>
            </div>
        </div>

        <div class="content">
            <!-- Start Screen -->
            <div class="start-screen active" id="startScreen">
                <div class="intro-text">
                    <h2>Welcome to the Revision Tool</h2>
                    <p>This interactive revision tool will help you prepare for the <strong>Unit 7290-727/777</strong> assessments (both assignment and multiple choice test).</p>
                    
                    <h3 style="margin-top: 20px; margin-bottom: 10px;">What to Expect:</h3>
                    <ul>
                        <li><strong>40 practice questions</strong> covering all 11 learning outcomes</li>
                        <li>Questions on engines, lubrication, cooling, fuel systems</li>
                        <li>Transmission, steering, suspension topics</li>
                        <li>Braking systems, wheels & tyres, electrical systems</li>
                        <li>Immediate feedback after each answer</li>
                        <li>Detailed explanations for learning</li>
                        <li>Final results with grade indication</li>
                    </ul>

                    <h3 style="margin-top: 20px; margin-bottom: 10px;">Grading System:</h3>
                    <ul>
                        <li><strong>Pass:</strong> 65% or above</li>
                        <li><strong>Merit:</strong> 75% or above</li>
                        <li><strong>Distinction:</strong> 85% or above</li>
                    </ul>
                </div>
                <button class="btn" onclick="startQuiz()">Start Revision Quiz</button>
            </div>

            <!-- Quiz Screen -->
            <div class="quiz-screen" id="quizScreen">
                <div class="question-card">
                    <div class="question-number" id="questionNumber">Question 1 of 40</div>
                    <div class="question-text" id="questionText"></div>
                    <div class="options" id="options"></div>
                    <div class="feedback" id="feedback"></div>
                </div>
                <div class="navigation">
                    <button class="btn btn-secondary" onclick="previousQuestion()" id="prevBtn" style="display: none;">Previous</button>
                    <button class="btn" onclick="checkAnswer()" id="checkBtn">Check Answer</button>
                    <button class="btn" onclick="nextQuestion()" id="nextBtn" style="display: none;">Next Question</button>
                </div>
            </div>

            <!-- Results Screen -->
            <div class="results-screen" id="resultsScreen">
                <div class="results-summary">
                    <h2>Quiz Complete!</h2>
                    <div class="score-circle">
                        <div class="score-percentage" id="finalScore">0%</div>
                        <div class="score-label">Final Score</div>
                    </div>
                    <div class="grade-message" id="gradeMessage"></div>
                    <div class="stats" style="margin-top: 20px;">
                        <div class="stat">
                            <div class="stat-value" id="finalCorrect">0</div>
                            <div class="stat-label">Correct Answers</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="finalIncorrect">0</div>
                            <div class="stat-label">Incorrect Answers</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value" id="finalTotal">40</div>
                            <div class="stat-label">Total Questions</div>
                        </div>
                    </div>
                </div>
                
                <div class="review-section">
                    <h3>Review Your Answers</h3>
                    <div id="reviewList"></div>
                </div>

                <div class="navigation">
                    <button class="btn" onclick="restartQuiz()">Restart Quiz</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const allQuestions = [
            // LO1: Purpose of routine maintenance
            {
                question: "Which of the following best describes the primary purpose of routine vehicle maintenance?",
                options: [
                    "To maintain vehicle performance and safety",
                    "To keep the vehicle clean and presentable",
                    "To increase the vehicle's resale value",
                    "To comply with manufacturer advertising"
                ],
                correct: 0,
                explanation: "Routine maintenance is primarily carried out to maintain vehicle performance, reliability, and safety whilst ensuring legal compliance and preventing breakdowns."
            },
            {
                question: "Why is it important to observe agreed timescales during maintenance work?",
                options: [
                    "To complete work quickly regardless of quality",
                    "To allow proper workshop planning and manage customer expectations",
                    "To finish early and take breaks",
                    "To avoid using specialist equipment"
                ],
                correct: 1,
                explanation: "Observing timescales maintains workshop efficiency, allows proper scheduling, manages costs, and keeps customers and management informed of progress."
            },
            {
                question: "Which document provides the primary record of work carried out on a vehicle?",
                options: [
                    "Invoice",
                    "Job card",
                    "Service book",
                    "MOT certificate"
                ],
                correct: 1,
                explanation: "A job card records work requested, parts used, time taken, and findings. It provides an audit trail and supports warranty claims."
            },
            {
                question: "Which legislation governs the technical requirements for vehicles used on public roads?",
                options: [
                    "Health and Safety at Work Act",
                    "Road Traffic Act",
                    "Construction and Use Regulations",
                    "Highway Code"
                ],
                correct: 2,
                explanation: "The Road Vehicles (Construction and Use) Regulations specify technical requirements including lighting, tyres, brakes, emissions, and other safety features."
            },

            // LO2: Petrol and diesel engines
            {
                question: "In a four-stroke petrol engine, during which stroke does the spark plug ignite the air-fuel mixture?",
                options: [
                    "Intake stroke",
                    "Compression stroke",
                    "Power stroke",
                    "Exhaust stroke"
                ],
                correct: 2,
                explanation: "The spark plug fires near the end of the compression stroke, causing ignition at the start of the power stroke when the piston is near top dead centre (TDC)."
            },
            {
                question: "What is the correct sequence of strokes in a four-stroke cycle engine?",
                options: [
                    "Intake, power, compression, exhaust",
                    "Compression, intake, power, exhaust",
                    "Intake, compression, power, exhaust",
                    "Power, exhaust, intake, compression"
                ],
                correct: 2,
                explanation: "The four-stroke cycle follows the sequence: Intake (fuel/air in), Compression (mixture compressed), Power (combustion/expansion), Exhaust (gases expelled)."
            },
            {
                question: "How is fuel ignited in a compression ignition engine?",
                options: [
                    "By a spark plug at the correct timing",
                    "By glow plugs throughout operation",
                    "By the heat generated from compressing air",
                    "By an electric igniter in the cylinder"
                ],
                correct: 2,
                explanation: "Diesel engines use compression ignition. Air is compressed to very high pressure and temperature, then fuel is injected and ignites spontaneously from the heat."
            },
            {
                question: "What is the primary function of the crankshaft in an engine?",
                options: [
                    "To open and close the valves",
                    "To convert reciprocating motion into rotational motion",
                    "To compress the air-fuel mixture",
                    "To regulate engine temperature"
                ],
                correct: 1,
                explanation: "The crankshaft converts the up-and-down (reciprocating) motion of the pistons into rotational motion to drive the transmission and ultimately the wheels."
            },

            // LO3: Lubrication and cooling
            {
                question: "Which component is responsible for circulating oil under pressure throughout the engine?",
                options: [
                    "Oil filter",
                    "Sump",
                    "Oil pump",
                    "Pressure relief valve"
                ],
                correct: 2,
                explanation: "The oil pump draws oil from the sump and circulates it under pressure through galleries to lubricate bearings, camshafts, and other moving components."
            },
            {
                question: "What is the main storage location for engine oil when the engine is not running?",
                options: [
                    "The oil filter housing",
                    "The sump or oil pan",
                    "The oil galleries",
                    "The rocker cover"
                ],
                correct: 1,
                explanation: "The sump (oil pan) is located at the bottom of the engine and serves as the main reservoir for engine oil when the engine is switched off."
            },
            {
                question: "What is the primary function of the thermostat in a cooling system?",
                options: [
                    "To increase coolant pressure",
                    "To control the flow of coolant and maintain operating temperature",
                    "To prevent coolant from freezing",
                    "To circulate coolant through the engine"
                ],
                correct: 1,
                explanation: "The thermostat regulates coolant flow by opening and closing based on temperature. It stays closed when cold to aid warm-up, and opens when hot to allow cooling."
            },
            {
                question: "In addition to preventing freezing, what other functions does antifreeze provide?",
                options: [
                    "Increases oil pressure",
                    "Raises the boiling point and prevents corrosion",
                    "Improves fuel economy",
                    "Reduces engine noise"
                ],
                correct: 1,
                explanation: "Antifreeze (ethylene glycol) prevents freezing in winter, raises boiling point in summer, prevents corrosion of metal components, and lubricates the water pump."
            },

            // LO4: Ignition and petrol fuel systems
            {
                question: "Which component creates the high-voltage spark required to ignite the air-fuel mixture?",
                options: [
                    "Battery",
                    "Alternator",
                    "Spark plug",
                    "Fuel injector"
                ],
                correct: 2,
                explanation: "Spark plugs receive high voltage from the ignition coil (typically 20,000-40,000 volts) and create a spark across the electrode gap to ignite the compressed mixture."
            },
            {
                question: "Why is correct ignition timing critical for engine performance?",
                options: [
                    "It only affects starting performance",
                    "It ensures combustion occurs at the optimum point in the cycle",
                    "It controls fuel pump operation",
                    "It regulates idle speed only"
                ],
                correct: 1,
                explanation: "Correct ignition timing ensures the spark occurs at the precise moment for maximum power and efficiency. Incorrect timing causes poor performance, increased emissions, and potential engine damage."
            },
            {
                question: "What does the term 'fuel atomisation' refer to?",
                options: [
                    "Converting fuel into nuclear energy",
                    "Breaking fuel into fine droplets for combustion",
                    "Storing fuel safely in the tank",
                    "Measuring fuel consumption"
                ],
                correct: 1,
                explanation: "Atomisation is the process of breaking fuel into a fine mist of tiny droplets, increasing surface area for better mixing with air and more complete combustion."
            },
            {
                question: "When handling petrol, which safety precaution is most important?",
                options: [
                    "Store in direct sunlight for visibility",
                    "Mix with water to dilute vapours",
                    "Keep away from sources of ignition",
                    "Use only metal containers"
                ],
                correct: 2,
                explanation: "Petrol is highly flammable. Keep it away from sparks, flames, and heat sources. Ensure good ventilation, wear appropriate PPE, and never smoke nearby."
            },

            // LO5: Diesel fuel systems
            {
                question: "Why is high injection pressure necessary in modern diesel fuel systems?",
                options: [
                    "To create noise for driver feedback",
                    "To ensure proper atomisation and complete combustion",
                    "To increase fuel tank capacity",
                    "To cool the fuel system"
                ],
                correct: 1,
                explanation: "High pressure (up to 2000+ bar in common rail systems) atomises diesel into extremely fine droplets for complete combustion, improving efficiency and reducing emissions."
            },
            {
                question: "What is the primary purpose of the fuel filter in a diesel system?",
                options: [
                    "To increase fuel pressure",
                    "To remove contaminants and water from the fuel",
                    "To add lubricants to the fuel",
                    "To heat the fuel"
                ],
                correct: 1,
                explanation: "Fuel filters remove dirt, rust, water, and other contaminants that could damage precision components such as injectors and high-pressure pumps."
            },
            {
                question: "What is the function of glow plugs in a diesel engine?",
                options: [
                    "To ignite the fuel throughout engine operation",
                    "To heat the combustion chamber to assist cold starting",
                    "To measure combustion temperature",
                    "To regulate fuel pressure"
                ],
                correct: 1,
                explanation: "Glow plugs heat the combustion chamber before and during starting in cold conditions, raising air temperature to assist ignition when compression heat alone is insufficient."
            },

            // LO6: Clutches and gearboxes
            {
                question: "What is the primary function of a clutch in a manual transmission vehicle?",
                options: [
                    "To increase engine power",
                    "To temporarily disconnect the engine from the gearbox",
                    "To improve fuel economy",
                    "To cool the transmission"
                ],
                correct: 1,
                explanation: "The clutch allows temporary disconnection between engine and gearbox for gear changes and stopping, then smoothly reconnects them to transfer power to the wheels."
            },
            {
                question: "What happens when the clutch pedal is fully depressed?",
                options: [
                    "The engine stops running",
                    "The clutch disc is separated from the flywheel",
                    "The brakes are applied automatically",
                    "Fuel supply is increased"
                ],
                correct: 1,
                explanation: "Pressing the clutch pedal fully disengages the clutch disc from the flywheel and pressure plate, disconnecting the engine from the transmission."
            },
            {
                question: "What is the main purpose of a gearbox in a vehicle transmission system?",
                options: [
                    "To store transmission fluid",
                    "To provide different ratios between engine speed and wheel speed",
                    "To filter transmission oil",
                    "To cool the engine"
                ],
                correct: 1,
                explanation: "The gearbox provides various gear ratios to match engine speed to road speed. Lower gears give high torque for starting/hills; higher gears provide economy for cruising."
            },
            {
                question: "Which fluid is specifically designed for use in automatic transmissions?",
                options: [
                    "Engine oil",
                    "Brake fluid",
                    "Automatic transmission fluid (ATF)",
                    "Power steering fluid"
                ],
                correct: 2,
                explanation: "ATF is specially formulated to lubricate gears, operate hydraulic controls, cool components, and clean internal parts in automatic transmission systems."
            },

            // LO7: Driveline and final drive
            {
                question: "What is the primary function of constant velocity (CV) joints?",
                options: [
                    "To store drive shaft lubricant",
                    "To transmit power smoothly through varying angles",
                    "To increase vehicle speed",
                    "To reduce fuel consumption"
                ],
                correct: 1,
                explanation: "CV joints allow the driveshaft to transmit power smoothly at varying angles as suspension moves, maintaining constant velocity with minimal vibration."
            },
            {
                question: "What is the main purpose of the differential in the final drive?",
                options: [
                    "To allow wheels to rotate at different speeds during cornering",
                    "To stop the vehicle",
                    "To start the engine",
                    "To filter drive train oil"
                ],
                correct: 0,
                explanation: "The differential splits power between the driving wheels and allows them to rotate at different speeds when cornering, as the outer wheel travels further than the inner wheel."
            },
            {
                question: "Why must CV joint protective boots be maintained in good condition?",
                options: [
                    "For aesthetic purposes only",
                    "To retain grease and prevent contamination",
                    "To support the wheel bearing",
                    "To improve fuel economy"
                ],
                correct: 1,
                explanation: "CV joint boots keep grease in and dirt/water out. Split or damaged boots lead to contamination, grease loss, and rapid joint failure requiring expensive replacement."
            },

            // LO8: Steering systems
            {
                question: "What is the main benefit of power-assisted steering systems?",
                options: [
                    "To make steering heavier for better feedback",
                    "To reduce the effort required to turn the steering wheel",
                    "To lock the wheels when stationary",
                    "To improve tyre inflation"
                ],
                correct: 1,
                explanation: "Power steering (hydraulic or electric) assists the driver's steering input, significantly reducing the effort required, especially at low speeds and during parking manoeuvres."
            },
            {
                question: "What does the term 'steering geometry' refer to?",
                options: [
                    "The shape of the steering wheel",
                    "The angles and measurements that affect vehicle handling",
                    "The color coding of steering components",
                    "The size of the steering box"
                ],
                correct: 1,
                explanation: "Steering geometry (wheel alignment) includes angles such as camber, castor, and toe. Correct geometry ensures straight-line stability, even tyre wear, and proper handling characteristics."
            },

            // LO9: Suspension, wheels and tyres
            {
                question: "What is the primary purpose of a vehicle's suspension system?",
                options: [
                    "To increase vehicle weight",
                    "To absorb road irregularities and maintain tyre contact",
                    "To increase fuel consumption",
                    "To improve engine performance"
                ],
                correct: 1,
                explanation: "The suspension system absorbs bumps and vibrations, maintains tyre contact with the road surface, provides passenger comfort, and supports vehicle control and handling."
            },
            {
                question: "What is the legal minimum tyre tread depth for cars in the UK?",
                options: [
                    "1.0mm across the full width",
                    "1.6mm across the central three-quarters",
                    "3.0mm across the full width",
                    "2.5mm at any point"
                ],
                correct: 1,
                explanation: "The legal minimum is 1.6mm across the central three-quarters of the tread width, around the entire circumference. Below this is illegal and significantly compromises safety."
            },
            {
                question: "What is the function of shock absorbers (dampers) in a suspension system?",
                options: [
                    "To provide impact to passengers",
                    "To control spring oscillation and prevent excessive bounce",
                    "To increase vehicle weight",
                    "To inflate the tyres"
                ],
                correct: 1,
                explanation: "Shock absorbers dampen spring oscillations, preventing excessive bouncing. They control body movement and ensure tyres maintain contact with the road for safety and handling."
            },
            {
                question: "In the tyre marking '205/55 R16', what does the '55' represent?",
                options: [
                    "The rim diameter in inches",
                    "The speed rating of the tyre",
                    "The aspect ratio (sidewall height as percentage of width)",
                    "The load index"
                ],
                correct: 2,
                explanation: "The aspect ratio (55) represents the sidewall height as a percentage of the tread width. In this case, the sidewall is 55% of 205mm."
            },

            // LO10: Braking systems
            {
                question: "What is the primary function of a vehicle braking system?",
                options: [
                    "To increase acceleration",
                    "To convert kinetic energy into heat to slow or stop the vehicle",
                    "To improve steering response",
                    "To start the engine"
                ],
                correct: 1,
                explanation: "The braking system converts kinetic energy (movement) into thermal energy (heat) through friction, enabling controlled deceleration and stopping of the vehicle."
            },
            {
                question: "What does ABS stand for, and what is its primary function?",
                options: [
                    "Automatic Brake System - applies brakes automatically",
                    "Anti-lock Braking System - prevents wheel lock-up during braking",
                    "Advanced Brake Servo - increases brake pressure",
                    "Auxiliary Braking System - provides extra braking force"
                ],
                correct: 1,
                explanation: "ABS (Anti-lock Braking System) prevents wheels from locking during heavy braking by rapidly modulating brake pressure, maintaining steering control during emergency stops."
            },
            {
                question: "Which type of fluid is used in hydraulic brake systems?",
                options: [
                    "Engine oil SAE 10W-40",
                    "Brake fluid DOT 4",
                    "Automatic transmission fluid",
                    "Power steering fluid"
                ],
                correct: 1,
                explanation: "Brake fluid (typically DOT 3, 4, or 5.1) is a glycol-based hydraulic fluid designed to transmit pressure from the pedal to the brakes whilst withstanding high temperatures."
            },
            {
                question: "Why is regular inspection of brake pads and shoes important?",
                options: [
                    "Friction material wears with use and must be replaced before becoming too thin",
                    "To change the colour of the components",
                    "They never require checking",
                    "To improve engine performance"
                ],
                correct: 0,
                explanation: "Friction material wears during normal braking. Worn pads/shoes reduce braking efficiency and can damage discs/drums if worn to the backing plate, causing metal-to-metal contact."
            },

            // LO11: Electrical systems
            {
                question: "What is the primary function of a vehicle battery?",
                options: [
                    "To generate electricity whilst driving",
                    "To store electrical energy and provide power for starting",
                    "To cool the alternator",
                    "To filter electrical current"
                ],
                correct: 1,
                explanation: "The battery stores electrical energy chemically, provides high current (200-400 amps) for starting the engine, and powers electrical accessories when the engine is not running."
            },
            {
                question: "What is the main function of the alternator?",
                options: [
                    "To start the engine",
                    "To generate electricity and recharge the battery whilst the engine runs",
                    "To regulate fuel flow",
                    "To control ignition timing"
                ],
                correct: 1,
                explanation: "The alternator converts mechanical energy from the engine into electrical energy, charging the battery and powering all electrical systems when the engine is running."
            },
            {
                question: "What does the starter motor do when activated?",
                options: [
                    "Stops the engine running",
                    "Cranks the engine to initiate the starting cycle",
                    "Charges the battery",
                    "Controls the steering"
                ],
                correct: 1,
                explanation: "The starter motor is a powerful electric motor that cranks (rotates) the engine at sufficient speed to establish the four-stroke cycle and enable the engine to run independently."
            },
            {
                question: "Before working on electrical systems, what is the most important safety precaution?",
                options: [
                    "Add more fuel to the tank",
                    "Disconnect the battery, negative terminal first",
                    "Turn on all electrical systems",
                    "Increase tyre pressures"
                ],
                correct: 1,
                explanation: "Disconnecting the battery (negative terminal first) prevents short circuits, electrical shocks, accidental airbag deployment, and protects electronic control units from damage during repairs."
            },
            {
                question: "What is the purpose of fuses in a vehicle's electrical system?",
                options: [
                    "To increase electrical current flow",
                    "To protect circuits by breaking when excessive current flows",
                    "To store electrical energy",
                    "To generate additional power"
                ],
                correct: 1,
                explanation: "Fuses are safety devices containing a thin wire that melts and breaks the circuit if current exceeds the rated value, protecting wiring and components from overheating and potential fire."
            }
        ];

        // Shuffle questions to create random order
        const questions = allQuestions.sort(() => Math.random() - 0.5).slice(0, 40);

        let currentQuestionIndex = 0;
        let correctCount = 0;
        let incorrectCount = 0;
        let userAnswers = [];
        let answered = false;

        function startQuiz() {
            document.getElementById('startScreen').classList.remove('active');
            document.getElementById('quizScreen').classList.add('active');
            loadQuestion();
            updateProgress();
        }

        function loadQuestion() {
            answered = false;
            const question = questions[currentQuestionIndex];
            
            document.getElementById('questionNumber').textContent = `Question ${currentQuestionIndex + 1} of ${questions.length}`;
            document.getElementById('questionText').textContent = question.question;
            
            const optionsDiv = document.getElementById('options');
            optionsDiv.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.onclick = () => selectOption(index);
                optionDiv.innerHTML = `
                    <input type="radio" name="answer" id="option${index}" value="${index}">
                    <label for="option${index}" style="cursor: pointer; flex: 1;">${option}</label>
                `;
                optionsDiv.appendChild(optionDiv);
            });

            document.getElementById('feedback').classList.remove('show', 'correct', 'incorrect');
            document.getElementById('checkBtn').style.display = 'inline-block';
            document.getElementById('nextBtn').style.display = 'none';
            
            document.getElementById('prevBtn').style.display = currentQuestionIndex > 0 ? 'inline-block' : 'none';
        }

        function selectOption(index) {
            if (answered) return;
            
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            document.querySelectorAll('.option')[index].classList.add('selected');
            document.getElementById(`option${index}`).checked = true;
        }

        function checkAnswer() {
            if (answered) return;
            
            const selectedOption = document.querySelector('input[name="answer"]:checked');
            if (!selectedOption) {
                alert('Please select an answer before checking.');
                return;
            }

            answered = true;
            const userAnswer = parseInt(selectedOption.value);
            const question = questions[currentQuestionIndex];
            const isCorrect = userAnswer === question.correct;

            userAnswers[currentQuestionIndex] = {
                question: question.question,
                userAnswer: userAnswer,
                correctAnswer: question.correct,
                isCorrect: isCorrect,
                options: question.options
            };

            if (isCorrect) {
                correctCount++;
            } else {
                incorrectCount++;
            }

            const feedback = document.getElementById('feedback');
            feedback.className = `feedback show ${isCorrect ? 'correct' : 'incorrect'}`;
            feedback.innerHTML = `
                <div class="feedback-title">${isCorrect ? '✓ Correct!' : '✗ Incorrect'}</div>
                <div>${question.explanation}</div>
            `;

            document.querySelectorAll('.option').forEach((opt, index) => {
                opt.classList.add('disabled');
                if (index === question.correct) {
                    opt.classList.add('correct');
                } else if (index === userAnswer && !isCorrect) {
                    opt.classList.add('incorrect');
                }
            });

            document.getElementById('checkBtn').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'inline-block';
            document.getElementById('nextBtn').textContent = currentQuestionIndex === questions.length - 1 ? 'View Results' : 'Next Question';

            updateProgress();
        }

        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                showResults();
            }
            updateProgress();
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
                
                if (userAnswers[currentQuestionIndex]) {
                    answered = true;
                    const userAnswer = userAnswers[currentQuestionIndex].userAnswer;
                    const question = questions[currentQuestionIndex];
                    
                    document.getElementById(`option${userAnswer}`).checked = true;
                    document.querySelectorAll('.option')[userAnswer].classList.add('selected');
                    
                    document.querySelectorAll('.option').forEach((opt, index) => {
                        opt.classList.add('disabled');
                        if (index === question.correct) {
                            opt.classList.add('correct');
                        } else if (index === userAnswer && userAnswer !== question.correct) {
                            opt.classList.add('incorrect');
                        }
                    });

                    const feedback = document.getElementById('feedback');
                    const isCorrect = userAnswer === question.correct;
                    feedback.className = `feedback show ${isCorrect ? 'correct' : 'incorrect'}`;
                    feedback.innerHTML = `
                        <div class="feedback-title">${isCorrect ? '✓ Correct!' : '✗ Incorrect'}</div>
                        <div>${question.explanation}</div>
                    `;

                    document.getElementById('checkBtn').style.display = 'none';
                    document.getElementById('nextBtn').style.display = 'inline-block';
                }
                
                updateProgress();
            }
        }

        function updateProgress() {
            const answeredQuestions = userAnswers.filter(a => a !== undefined).length;
            const progress = (answeredQuestions / questions.length) * 100;
            
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressBar').textContent = Math.round(progress) + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            document.getElementById('totalQuestions').textContent = questions.length;
            document.getElementById('correctAnswers').textContent = correctCount;
            document.getElementById('incorrectAnswers').textContent = incorrectCount;
        }

        function showResults() {
            document.getElementById('quizScreen').classList.remove('active');
            document.getElementById('resultsScreen').classList.add('active');

            const percentage = Math.round((correctCount / questions.length) * 100);
            document.getElementById('finalScore').textContent = percentage + '%';
            document.getElementById('finalCorrect').textContent = correctCount;
            document.getElementById('finalIncorrect').textContent = incorrectCount;
            document.getElementById('finalTotal').textContent = questions.length;

            let gradeMessage = '';
            let gradeClass = '';
            
            if (percentage >= 85) {
                gradeMessage = '🌟 Distinction - Outstanding Work!';
                gradeClass = 'grade-distinction';
            } else if (percentage >= 75) {
                gradeMessage = '⭐ Merit - Excellent Job!';
                gradeClass = 'grade-merit';
            } else if (percentage >= 65) {
                gradeMessage = '✓ Pass - Well Done!';
                gradeClass = 'grade-pass';
            } else {
                gradeMessage = '✗ Below Pass - Keep Learning!';
                gradeClass = 'grade-fail';
            }

            const gradeDiv = document.getElementById('gradeMessage');
            gradeDiv.textContent = gradeMessage;
            gradeDiv.className = `grade-message ${gradeClass}`;

            const reviewList = document.getElementById('reviewList');
            reviewList.innerHTML = '';

            userAnswers.forEach((answer, index) => {
                const reviewItem = document.createElement('div');
                reviewItem.className = `review-item ${answer.isCorrect ? 'correct' : 'incorrect'}`;
                
                let html = `
                    <div class="review-question">Q${index + 1}: ${answer.question}</div>
                    <div class="review-answer">
                `;
                
                if (!answer.isCorrect) {
                    html += `
                        <div class="your-answer"><strong>Your answer:</strong> ${answer.options[answer.userAnswer]}</div>
                        <div class="correct-answer"><strong>Correct answer:</strong> ${answer.options[answer.correctAnswer]}</div>
                    `;
                } else {
                    html += `<div class="correct-answer"><strong>Your answer:</strong> ${answer.options[answer.userAnswer]} ✓</div>`;
                }
                
                html += `</div>`;
                reviewItem.innerHTML = html;
                reviewList.appendChild(reviewItem);
            });
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            correctCount = 0;
            incorrectCount = 0;
            userAnswers = [];
            answered = false;

            document.getElementById('resultsScreen').classList.remove('active');
            document.getElementById('startScreen').classList.add('active');
            updateProgress();
        }
    </script>
</body>
</html>